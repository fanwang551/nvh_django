### 一、 需求分析概要

**项目名称**：车辆NVH对标分析看板
**核心功能**：通过选择基准车型与对标车型，多维度（匀速、加速、空调、底盘、声学包）对比展示噪声数据、性能参数及频谱曲线。
**任务**：编写前后端代码实现需求，后端在apps下新建一个app，前端需要store下添加js和"frontend/src/views/business"下新建vue,"frontend/src/views/BusinessCenter.vue"其他添加入口
#### 1. 交互与筛选区域 (Header)
*   **主车型选择**：单选下拉框。
    *   *数据源*：`VehicleModel` 表。
*   **对标车型选择**：多选下拉框。
    *   *默认逻辑*：选中主车型后，自动读取其 `benchmark_vehicle_id` 字段填充默认选中项。
    *   *操作*：支持用户手动增删，或清空（即“为空”）。
*   **功能扩展按钮**：
    *   [底盘详细分析]：点击切换显示/隐藏底盘分析模块。
    *   [声学包分析]：点击切换显示/隐藏声学包分析模块。

#### 2. 核心噪声分析区域 (Rows 1-3)
此区域默认展示，布局为 3行 x 2列。

*   **第一排：匀速工况噪声（雷达图）**
    *   **左侧**：匀速前排驾驶员右耳噪声。
        *   *维度*：工况测点 ID [1, 5, 7, 9, 11, 13]。
        *   *数值*：`AcousticTestData.rms_value`。
    *   **右侧**：匀速二排驾驶员左耳噪声。
        *   *维度*：工况测点 ID [2, 6, 8, 10, 12, 14]。
        *   *数值*：`AcousticTestData.rms_value`。
    *   *展示逻辑*：同一雷达图中叠加展示主车型与所有对标车型的数据。

*   **第二排：加速工况噪声（曲线图）**
    *   **左侧**：加速前排驾驶员右耳噪声（测点 ID 1）。
    *   **右侧**：加速后排驾驶员左耳噪声（测点 ID 2）。
    *   *数据源*：`DynamicNoiseData.sound_pressure_curve`。
    *   *特殊逻辑（单位兼容性）*：
        *   检查 `x_axis_type` (speed vs rpm)。
        *   若对标车单位与主车型一致 -> 同图展示。
        *   若对标车单位与主车型不一致 -> 该对标车曲线不展示（仅展示主车型）。

*   **第三排：空调工况噪声（趋势曲线图）**
    *   **左侧**：空调驾驶员右耳噪声。
        *   *X轴*：工况测点 ID [17,18,19,20,21,22,23,24,25]（代表不同档位 空调1档~9档）。
    *   **右侧**：空调后排驾驶员左耳噪声。
        *   *X轴*：工况测点 ID [ 26,27, 28,29, 30,31, 32,33, 34]（代表不同档位 空调1档~9档）。
    *   *数值*：`AcousticTestData.rms_value`。
    *   *展示逻辑*：折线图，连接各测点值，对比主车型与对标车。

#### 3. 扩展模块 A：底盘详细分析 (Row 4 - Optional)
点击按钮后加载，包含一个表格和两个图表。

*   **参数对比表**：
    *   *列定义*：车型、悬架形式、副车架形式（来源 `VehicleModel`）；轮胎品牌、型号、是否静音、轮辋侧向刚度（来源 `WheelPerformance`）。
*   **图表 1：车轮力传递率（曲线图）**
    *   *数据源*：`WheelPerformance.force_transfer_signal`。
    *   *坐标*：X轴=Frequency, Y轴=dB。
*   **图表 2：悬架隔振率（曲线图）**
    *   *数据源*：`VehicleSuspensionIsolationTest`表对应车型id的测试——>test_id对应和测点="左前/右前/左后/右后减振器",如果数据库没有对应测点则为空`MountIsolationData` (x/y/z_isolation)。
    *   *坐标*：X轴="测点-方向", Y轴=dB。
    *   一个车对应一条曲线
    *   *内容*：展示左前/右前/左后/右后减振器在不同方向的隔振率。

#### 4. 扩展模块 B：声学包分析 (Row 5 - Optional)
点击按钮后加载，包含一个表格和一个图表。

*   **性能对比表**：
    *   *列定义*：
        *   车型、悬架形式、前挡玻璃、侧门玻璃（来源 `VehicleModel` ）、隔声性能（来源`VehicleSoundInsulationData.sound_insulation_performance）
        *   气密性泄露（来源 `AirtightnessTest.uncontrolled_leakage`）。
        *   100km/h & 120km/h 语音清晰度（来源 `AcousticTestData` 测点 11, 13 的 `speech_clarity`）。
*   **图表：整车隔声量（曲线图）**
    *   *数据源*：`VehicleSoundInsulationData` (freq_400 到 freq_10000 字段)。
    *   *坐标*：X轴=频率 (400Hz-10kHz), Y轴=隔声量(dB)。

---

### 二、 UI 原型草图 (Wireframe)

```text
+-----------------------------------------------------------------------+
|  NVH 对标分析平台                                                     |
+-----------------------------------------------------------------------+
| [筛选区]                                                              |
| 车型选择: [ E261MCE (主) v]    对标车: [ 对标车A x, 对标车B x  v]     |
|                                                                       |
| [功能开关]                                                            |
| ( ) 底盘详细分析    ( ) 声学包分析   <-- 点击按钮切换下方模块显示     |
+-----------------------------------------------------------------------+
| [第一排：匀速噪声 - RMS雷达图]                                        |
| +-----------------------------+   +-----------------------------+     |
| | 标题: 匀速前排驾驶员右耳    |   | 标题: 匀速二排驾驶员左耳    |     |
| | [雷达图区域]                |   | [雷达图区域]                |     |
| | 维度: 测点1,5,7...          |   | 维度: 测点2,6,8...          |     |
| | 图例: ■主车 ■对标A ■对标B   |   |                             |     |
| +-----------------------------+   +-----------------------------+     |
+-----------------------------------------------------------------------+
| [第二排：加速噪声 - 动态曲线图]                                       |
| +-----------------------------+   +-----------------------------+     |
| | 标题: 加速前排驾驶员右耳    |   | 标题: 加速后排驾驶员左耳    |     |
| | [曲线图区域]                |   | [曲线图区域]                |     |
| | X轴: Speed/RPM  Y轴: dB(A)  |   | X轴: Speed/RPM  Y轴: dB(A)  |     |
| | *注: 单位不同时不显示对标车 |   |                             |     |
| +-----------------------------+   +-----------------------------+     |
+-----------------------------------------------------------------------+
| [第三排：空调噪声 - 趋势曲线图]                                       |
| +-----------------------------+   +-----------------------------+     |
| | 标题: 空调驾驶员右耳        |   | 标题: 空调后排驾驶员左耳    |     |
| | [折线图区域]                |   | [折线图区域]                |     |
| | X轴: 测点17,25... (工况)    |   | X轴: 测点26...34 (工况)    |     |
| | Y轴: RMS Value              |   | Y轴: RMS Value              |     |
| +-----------------------------+   +-----------------------------+     |
+-----------------------------------------------------------------------+
|                                                                       |
|  ============== [扩展模块：底盘详细分析] (默认隐藏) ==============    |
|                                                                       |
|  [表格：底盘参数对比]                                                 |
|  | 车型 | 悬架形式 | 轮胎品牌 | ... | 轮辋侧向刚度 |                  |
|  |------|----------|----------|-----|--------------|                  |
|  | E261 | ...      | ...      | ... | ...          |                  |
|                                                                       |
|  +-----------------------------+   +-----------------------------+    |
|  | 标题: 车轮力传递率          |   | 标题: 悬架隔振率            |    |
|  | [曲线图: Freq vs dB]        |   | [曲线图: 测点 vs dB]        |    |
|  +-----------------------------+   +-----------------------------+    |
|                                                                       |
+-----------------------------------------------------------------------+
|                                                                       |
|  ============== [扩展模块：声学包分析] (默认隐藏) ================    |
|                                                                       |
|  [表格：声学包性能对比]                                               |
|  | 车型 | 气密性(SCFM) | 100kph清晰度 | 120kph清晰度 | ... |          |
|  |------|--------------|--------------|--------------|-----|          |
|  | E261 | ...          | ...          | ...          | ... |          |
|                                                                       |
|  +-----------------------------------------------------------+        |
|  | 标题: 整车隔声量曲线                                      |        |
|  | [曲线图区域]                                              |        |
|  | X轴: 频率 (400Hz - 10000Hz)   Y轴: dB                     |        |
|  +-----------------------------------------------------------+        |
+-----------------------------------------------------------------------+
```

### 三、 数据映射逻辑表 (供后端参考)
```
|模块|图表/列名|数据源表|关键字段/逻辑|
|---|---|---|---|
|**Input**|对标车默认值|`VehicleModel`|`benchmark_vehicle_id`|
|**Row 1**|雷达图 (RMS)|`AcousticTestData`|`condition_point_id` IN (1,5...) / (2,6...), `rms_value`|
|**Row 2**|曲线图 (Dynamic)|`DynamicNoiseData`|`condition_measure_point_id`=20/21, `sound_pressure_curve`, Check `x_axis_type`|
|**Row 3**|曲线图 (RMS)|`AcousticTestData`|`condition_point_id` IN (21,25...) / (26,34...), `rms_value`|
|**Row 4**|表格-轮胎信息|`WheelPerformance`|`tire_brand`, `tire_model`, `is_silent`, `rim_lateral_stiffness`|
|**Row 4**|表格-副车架形式|`VehicleModel|`subframe_type`|
|**Row 4**|曲线-力传递|`WheelPerformance`|`force_transfer_signal` (JSON)|
|**Row 4**|曲线-悬架隔振|`VehicleSuspensionIsolationTest`|`vehicle_model`,`id`|
|**Row 4**|曲线-悬架隔振|`MountIsolationData`|`x/y/z_isolation` (JSON)|
|**Row 5**|表格-气密性|`AirtightnessTest`|`uncontrolled_leakage`|
|**Row 5**|表格-隔声性能|`VehicleSoundInsulationData`|`sound_insulation_performance`|
|**Row 5**|表格-清晰度|`AcousticTestData`|`condition_point_id`=11 (100kph), 13 (120kph), `speech_clarity`|
|**Row 5**|表格-前挡玻璃-侧门玻璃|`VehicleModel`|`front_windshield`,`side_door_glass`|
|**Row 5**|曲线-隔声量|`VehicleSoundInsulationData`|`freq_400` ... `freq_10000` (需转换为数组供前端绘图)|
```
